{% extends "base.html" %}

{%- set table_items =
    {'names': ['description', 'price', 'quantity'],
     'titles': ["Item description", "Unit price ex. VAT",
                "Quantity"],
     'demos': ['Golden Widget', '100.00', '1']}
-%}

{% block head %}
  {{ super() }}
  <script src="{{ url_for('static', filename='scripts.js') }}"></script>
  <script>
    const tableItems = {{ table_items | tojson }};
  </script>
{% endblock head %}

{% block content %}
  {{ super() }}

  <details>
    <summary>How to use</summary>
    <ol>
      <li>Fill out the form: all fields are required except for the buyer's details.
          Alternatively, populate with demo data for testing.</li>
      <li>Click the 'generate' button to create the invoice. It will open in a new tab or window.</li>
      <li>Print the invoice to paper or PDF. Choose the 'fit to page width' option in the print dialog.</li>
    </ol>
  </details>
  
  <form action="" method="post" id="invoice_form">
    <label for="invoiceNumber">Invoice Number:</label>
    <input type="text" id="invoiceNumber" name="invoice_number" data-demo="P64728">
    <br>
    <label for="invoice_date">Invoice Date:</label>
    <input type="date" id="invoice_date" name="invoice_date" data-demo="2023-05-02">
    <br>
    <label for="currency_code">Currency Code:</label>
    <input type="text" id="currency_code" name="currency_code" data-demo="GBP">
    <br>
    <label for="vat_percent">VAT rate (%):</label>
    <input type="text" id="vat_percent" name="vat_percent" data-demo="20">
    <br>
    <label for="seller_name">Seller name:</label>
    <input type="text" id="seller_name" name="seller_name" data-demo="The Seller Co.">
    <br>
    <label for="seller_vat_number">Seller VAT number:</label>
    <input type="text" id="seller_vat_number" name="seller_vat_number" data-demo="XY123456">
    <br>
    <label for="seller_address">Seller Address:</label>
    <textarea id="seller_address" name="seller_address" rows="4"
        data-demo="123 Example Road&#xa;London&#xa;EC1A 2AB">
    </textarea>
    <br>
    <input type="hidden" name="item_data" id="item_data" data-demo="">
  </form>

  <table>
    <thead>
      <tr>
        {% for description in table_items.titles %}
        <th>{{ description }}</th>
        {% endfor %}
        <th></th>
      </tr>
    </thead>
    <tbody id="item_table">
    </tbody>
  </table>

  <button type="button" onclick="addRow(tableItems)">Add item line</button>
  <br>
  <label for="buyer_address">Buyer name and address (optional):</label>
  <textarea name="buyer_address" id="buyer_address" form="invoice_form" rows="4"
      data-demo="A. B. Tester&#xa;The High Street&#xa;Birmingham"></textarea>
  <br>
  <button type="button" onclick="demoForm(tableItems)">Use demo data</button>
  <br>
  <button type="button" onclick="clearForm()">Clear form</button>
  <br>
  <button type="button" onclick="submitForm()">Generate</button>
{% endblock content %}

{% block footer %}
  <a href="https://github.com/e-mit/vat-invoice">View the source code on GitHub</a>
  <br><br>
  Please note: this website is provided for educational purposes only.
  <br>
  The generated invoices may not comply with applicable law.
  <br>
  {{ super() }}
{% endblock footer %}